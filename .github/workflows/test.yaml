name: Test Trigger

on:
  push:
    branches: [main]

jobs:
  test:
    runs-on: ubuntu-latest
    
    steps:
      - name: Check if workflow runs
        run: |
          echo "âœ… Workflow triggered successfully!"
          echo "Event: ${{ github.event_name }}"
          echo "Ref: ${{ github.ref }}"
          echo "SHA: ${{ github.sha }}"
          
      - name: Show changed files
        run: |
          echo "=== Changed files in this push ==="
          # If checkout is not done, use GitHub API
          curl -s -H "Authorization: token ${{ secrets.GITHUB_TOKEN }}" \
            "https://api.github.com/repos/${{ github.repository }}/commits/${{ github.sha }}" \
            | jq -r '.files[].filename' || echo "Could not fetch changed files"
            
      - name: Print commit info
        run: |
          echo "=== Commit details ==="
          git log -1 --oneline || echo "Not in git context yet"
          
      - name: List workflow files
        run: |
          echo "=== Workflow files ==="
          ls -la .github/workflows/
          
      - name: Simple timestamp
        run: |
          echo "Workflow ran at: $(date)"
          echo "Random number: $RANDOM"
