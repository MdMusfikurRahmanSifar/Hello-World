name: Test Trigger Debug

on:
  push:
    branches: [main]

jobs:
  test:
    runs-on: ubuntu-latest
    
    steps:
      # MUST ADD THIS STEP FIRST!
      - name: Checkout code
        uses: actions/checkout@v4
        with:
          fetch-depth: 2  # Get last 2 commits for diff
          
      - name: Debug info
        run: |
          echo "=== BASIC INFO ==="
          echo "Workflow: ${{ github.workflow }}"
          echo "Event: ${{ github.event_name }}"
          echo "Ref: ${{ github.ref }}"
          echo "Branch: ${{ github.ref_name }}"
          echo "SHA: ${{ github.sha }}"
          echo "Repository: ${{ github.repository }}"
          
      - name: Show changed files
        run: |
          echo "=== CHANGED FILES ==="
          git log --oneline -2
          echo "--- Files changed in last commit:"
          git diff HEAD~1 HEAD --name-only
          
      - name: List workflow files
        run: |
          echo "=== WORKFLOW FILES ==="
          ls -la .github/workflows/
          echo "---"
          echo "Listing all YAML files:"
          find . -name "*.yml" -o -name "*.yaml" | sort
          
      - name: Success
        run: echo "âœ… Test completed! Workflow is triggering correctly."
